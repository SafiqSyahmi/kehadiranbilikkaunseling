<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kehadiran Ke Bilik Kaunseling</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<style>
/* RESET */
*{margin:0;padding:0;box-sizing:border-box;}

/* BODY */
body{
  font-family:"Segoe UI", Arial, sans-serif;
  background: linear-gradient(135deg,#f1f8ff,#e8fdf7);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  overflow-x:hidden;
}

/* HEADER */
header{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content: space-between;
  padding:0 20px;
  height:90px;
  background: linear-gradient(135deg,#4dd0e1,#80deea);
  box-shadow:0 4px 15px rgba(0,0,0,.25);
  position:fixed;
  top:0; left:0; right:0;
  z-index:10;
}
.header-left{
  display:flex;
  align-items:center;
}
header img{
  height:60px;
  margin-right:10px;
}
.header-text{
  line-height:1.2;
  color:#004d40;
}
.header-text .title{
  font-size:18px;
  font-weight:700;
}
.header-text .subtitle{
  font-size:13px;
  opacity:.9;
}
.header-right img{
  height:60px;
}

/* MAIN */
main{
  flex:1;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:120px 10px 20px 10px; /* ruang header */
}

/* CARD */
.card{
  background:#fff;
  width:90%;
  max-width:400px;
  padding:25px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 12px 30px rgba(0,0,0,.22);
  animation: fadeUp .6s ease;
}

/* CARD TITLE */
.card h3{
  margin-bottom:20px;
  color:#006064;
  font-size:18px;
}

/* FIELD WITH ICON */
.field{
  position:relative;
  margin-top:12px;
}
.field i{
  position:absolute;
  top:50%;
  left:12px;
  transform:translateY(-50%);
  color:#00acc1;
  font-size:16px;
}
.field input,
.field select{
  width:100%;
  padding:12px 12px 12px 38px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
  transition:.25s;
}
.field input:focus,
.field select:focus{
  outline:none;
  border-color:#26c6da;
  box-shadow:0 0 0 3px rgba(38,198,218,.25);
}

/* BUTTON */
button{
  width:100%;
  margin-top:18px;
  padding:13px;
  border:none;
  border-radius:12px;
  font-size:16px;
  color:#fff;
  background:linear-gradient(135deg,#26c6da,#00acc1);
  cursor:pointer;
  transition:.25s;
}
button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 15px rgba(0,172,193,.45);
}
button:active{
  transform:scale(.98);
}

/* POPUP */
#popup{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:999;
}
#popup-content{
  background:#fff;
  width:90%;
  max-width:320px;
  padding:25px;
  border-radius:16px;
  text-align:center;
  margin:20% auto;
  animation: popupZoom .4s ease;
}
#popup-content p{color:#333;font-size:15px;}
#popup-content button{
  margin-top:15px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  background:#00acc1;
  color:#fff;
  cursor:pointer;
}

/* ANIMATIONS */
@keyframes fadeUp{
  from{opacity:0; transform:translateY(25px);}
  to{opacity:1; transform:translateY(0);}
}
@keyframes popupZoom{
  from{opacity:0; transform:scale(.85);}
  to{opacity:1; transform:scale(1);}
}

/* MEDIA QUERY */
@media(max-width:480px){
  header img{height:50px;}
  .header-text .title{font-size:16px;}
  .header-text .subtitle{font-size:12px;}
  .card{padding:20px;}
  input, select, button{font-size:14px;}
}
</style>
</head>

<body>

<header>
  <div class="header-left">
    <img src="UBK.png" alt="Logo Kiri">
    <div class="header-text">
      <div class="title">Unit Bimbingan & Kaunseling</div>
      <div class="subtitle">Sistem Kehadiran Murid</div>
    </div>
  </div>
  <div class="header-right">
    <img src="SMK Jerai.png" alt="Logo Kanan">
  </div>
</header>

<main>
  <div class="card">
    <h3>Kehadiran Murid</h3>

    <div class="field">
      <i class="fa-solid fa-user"></i>
      <input id="nama" placeholder="Nama">
    </div>

    <div class="field">
      <i class="fa-solid fa-layer-group"></i>
      <select id="tingkatan" onchange="updateKelas()">
        <option value="">Pilih Tingkatan</option>
        <option value="1">Tingkatan 1</option>
        <option value="2">Tingkatan 2</option>
        <option value="3">Tingkatan 3</option>
        <option value="4">Tingkatan 4</option>
        <option value="5">Tingkatan 5</option>
      </select>
    </div>

    <div class="field">
      <i class="fa-solid fa-chalkboard-user"></i>
      <select id="kelas">
        <option value="">Pilih Kelas</option>
      </select>
    </div>

    <div class="field">
      <i class="fa-solid fa-bullseye"></i>
      <select id="tujuan">
        <option value="">Pilih Tujuan</option>
        <option>Kaunseling Akademik</option>
        <option>Kaunseling Peribadi</option>
        <option>Isu Sosial</option>
        <option>Lain-lain</option>
      </select>
    </div>

    <button onclick="hantar()">Hantar</button>
  </div>
</main>

<!-- POPUP -->
<div id="popup">
  <div id="popup-content">
    <p id="popup-msg"></p>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbxlngo1Kx-SyBjZ-ZNsE9fvFFXmTHog0nOidghq7hQim_ZZTw4Vac860oIgOYXiUftw3Q/exec";

const kelasData={
  "1":["1 Seroja","1 Mawar","1 Jasmin","1 Kemboja","1 Bakawali","1 Dahlia"],
  "2":["2 Seroja","2 Mawar","2 Jasmin","2 Kemboja","2 Bakawali","2 Dahlia"],
  "3":["3 Seroja","3 Mawar","3 Jasmin","3 Kemboja","3 Bakawali","3 Dahlia"],
  "4":["4 Sains Akaun","4 Stem C","4 Kemanusiaan 1","4 Kemanusiaan 2","4 Kemanusiaan 3","4 Kemanusiaan 4"],
  "5":["5 Sains Akaun","5 Stem C","5 Kemanusiaan 1","5 Kemanusiaan 2","5 Kemanusiaan 3","5 Kemanusiaan 4"]
};

function updateKelas(){
  const ting = document.getElementById("tingkatan").value;
  const kelasSelect = document.getElementById("kelas");
  kelasSelect.innerHTML="<option value=''>Pilih Kelas</option>";
  (kelasData[ting]||[]).forEach(k=>{
    kelasSelect.innerHTML+=`<option>${k}</option>`;
  });
}

function showPopup(msg){
  document.getElementById("popup-msg").innerText = msg;
  document.getElementById("popup").style.display="block";
}
function closePopup(){
  document.getElementById("popup").style.display="none";
}

function hantar(){
  const data={
    nama:document.getElementById("nama").value,
    tingkatan:document.getElementById("tingkatan").value,
    kelas:document.getElementById("kelas").value,
    tujuan:document.getElementById("tujuan").value
  };
  if(!data.nama || !data.tingkatan || !data.kelas || !data.tujuan){
    showPopup("Sila lengkapkan semua medan.");
    return;
  }
  fetch(API_URL,{
    method:"POST",
    body: JSON.stringify(data)
  })
  .then(()=> {
    showPopup("Kehadiran berjaya direkod.");
    document.getElementById("nama").value="";
    document.getElementById("tingkatan").value="";
    document.getElementById("kelas").innerHTML="<option value=''>Pilih Kelas</option>";
    document.getElementById("tujuan").value="";
  })
  .catch(()=> showPopup("Ralat. Cuba lagi."));
}
</script>

</body>
</html>
