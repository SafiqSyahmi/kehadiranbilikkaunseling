<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<title>Kehadiran Ke Bilik Kaunseling</title>
<style>
/* Header Fixed */
header{
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:90px;
  background:#0984e3;
  display:flex;
  align-items:center;
  padding:0 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  z-index:1000;
}

/* Logo & Title */
header img{
  height:80px;
  margin-right:15px;
}

/* Body & Page */
body{
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#74b9ff,#a29bfe);
  display:flex;
  justify-content:center;
  align-items:flex-start; /* supaya card di bawah header */
  padding-top:80px; /* jarak untuk header */
  height:100vh;
  margin:0;
}

/* Card */
.card{
  background:#fff;
  padding:25px 30px;
  width:400px;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,0.2);
  text-align:center;
}

/* Input & Select */
input{
  width:93%;
  padding:12px;
  margin-top:12px;
  border:1px solid #dfe6e9;
  border-radius:8px;
  font-size:15px;
  transition:0.3s;
}
select{
  width:100%;
  padding:12px;
  margin-top:12px;
  border:1px solid #dfe6e9;
  border-radius:8px;
  font-size:15px;
  transition:0.3s;
}
input:focus, select:focus{
  outline:none;
  border-color:#0984e3;
  box-shadow:0 0 5px rgba(9,132,227,0.5);
}

/* Button */
button{
  width:100%;
  padding:12px;
  margin-top:15px;
  border:none;
  border-radius:8px;
  background:#0984e3;
  color:#fff;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
}
button:hover{
  background:#74b9ff;
  color:#2d3436;
}

/* Modal Popup */
#popup{
  display:none;
  position:fixed;
  z-index:999;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.6);
}
#popup-content{
  background:#fff;
  padding:25px;
  border-radius:12px;
  width:320px;
  max-width:90%;
  margin:15% auto;
  text-align:center;
  box-shadow:0 4px 20px rgba(0,0,0,0.3);
}
#popup-content button{
  margin-top:15px;
  background:#0984e3;
  color:#fff;
  border:none;
  padding:10px 20px;
  border-radius:8px;
  cursor:pointer;
}
#popup-content button:hover{
  background:#74b9ff;
  color:#2d3436;
}

</style>
</head>
<body>

<!-- Fixed Header -->
<header>
  <img src="UBK.png" alt="Logo">
</header>

<div class="card">
  <input id="nama" placeholder="Nama">

  <select id="tingkatan" onchange="updateKelas()">
    <option value="">-- Pilih Tingkatan --</option>
    <option value="1">Tingkatan 1</option>
    <option value="2">Tingkatan 2</option>
    <option value="3">Tingkatan 3</option>
    <option value="4">Tingkatan 4</option>
    <option value="5">Tingkatan 5</option>
  </select>

  <select id="kelas">
    <option value="">-- Pilih Kelas --</option>
  </select>

  <select id="tujuan">
    <option value="">-- Pilih Tujuan --</option>
    <option value="Kaunseling Akademik">Kaunseling Akademik</option>
    <option value="Kaunseling Peribadi">Kaunseling Peribadi</option>
    <option value="Isu Sosial">Isu Sosial</option>
    <option value="Lain-lain">Lain-lain</option>
  </select>

  <button onclick="hantar()">Hantar</button>
</div>

<!-- Modal Popup -->
<div id="popup">
  <div id="popup-content">
    <p id="popup-msg"></p>
    <button onclick="closePopup()">OK</button>
  </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxlngo1Kx-SyBjZ-ZNsE9fvFFXmTHog0nOidghq7hQim_ZZTw4Vac860oIgOYXiUftw3Q/exec";

// Data kelas ikut tingkatan
const kelasData = {
  "1": ["1 Seroja","1 Mawar","1 Jasmin","1 Kemboja","1 Bakawali","1 Dahlia"],
  "2": ["2 Seroja","2 Mawar","2 Jasmin","2 Kemboja","2 Bakawali","2 Dahlia"],
  "3": ["3 Seroja","3 Mawar","3 Jasmin","3 Kemboja","3 Bakawali","3 Dahlia"],
  "4": ["4 Sains Akaun","4 Stem C","4 Kemanusiaan 1","4 Kemanusiaan 2","4 Kemanusiaan 3","4 Kemanusiaan 4"],
  "5": ["5 Sains Akaun","5 Stem C","5 Kemanusiaan 1","5 Kemanusiaan 2","5 Kemanusiaan 3","5 Kemanusiaan 4"]
};

function updateKelas(){
  const tingkatan = document.getElementById("tingkatan").value;
  const kelasSelect = document.getElementById("kelas");

  kelasSelect.innerHTML = "<option value=''>-- Pilih Kelas --</option>";
  if(tingkatan && kelasData[tingkatan]){
    kelasData[tingkatan].forEach(k=>{
      const opt = document.createElement("option");
      opt.value = k;
      opt.text = k;
      kelasSelect.add(opt);
    });
  }
}

// Popup functions
function showPopup(msg){
  document.getElementById("popup-msg").innerText = msg;
  document.getElementById("popup").style.display = "block";
}
function closePopup(){
  document.getElementById("popup").style.display = "none";
}

// Submit borang
function hantar(){
  const data = {
    nama: document.getElementById("nama").value,
    tingkatan: document.getElementById("tingkatan").value,
    kelas: document.getElementById("kelas").value,
    tujuan: document.getElementById("tujuan").value
  };

  if(!data.nama || !data.tingkatan || !data.kelas || !data.tujuan){
    showPopup("Sila lengkapkan semua medan.");
    return;
  }

  fetch(API_URL,{
    method:"POST",
    body: JSON.stringify(data)
  })
  .then(r=>r.json())
  .then(res=>{
    showPopup("Kehadiran berjaya direkod.");
    document.getElementById("nama").value = "";
    document.getElementById("tingkatan").value = "";
    document.getElementById("kelas").innerHTML = "<option value=''>-- Pilih Kelas --</option>";
    document.getElementById("tujuan").value = "";
  })
  .catch(()=>{
    showPopup("Ralat. Cuba lagi.");
  });
}
</script>

</body>
</html>
